var jm=jm||{};"undefined"!=typeof exports&&"undefined"!=typeof module&&(jm=require("jm-sdk-core"),require("jm-ms")),function(){var t=jm.sdk,i=t.storage,n=jm.ms;if(!t.oms){t.on("init",function(i){i.oms=i.oms||{},i.oms.uri=i.oms.uri||i.uri,i.oms.timeout=i.oms.timeout||i.timeout,t.oms.init(i.oms)});var o=function(t,i){};t.oms={init:function(o){var e=this;o=o||{};var m=o.uri,u=o.prefix||"/oms";this.uri=m+u;var s=n();e.client=s,s.use(function(t,n,o){if(t.data||(t.data={}),!t.data.token){var e=i.getItem("token")||null;e&&(t.data.token=e)}o()}),n.client({uri:this.uri,timeout:o.timeout||0},function(i,n){!i&&n&&(s.use({fn:n}),n.on("open",function(){t.emit("open","oms")}),n.on("close",function(){t.emit("close","oms")}))}),jm.enableEvent(this)},nav:function(t,i){i||(i=o),t||(t={});this.client.get({uri:"/nav",data:t},i)},allNav:function(t,i){i||(i=o),t||(t={});this.client.get({uri:"/navs/all",data:t},i)}}}}();