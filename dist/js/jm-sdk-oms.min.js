var jm=jm||{};"undefined"!=typeof exports&&"undefined"!=typeof module&&(jm=require("jm-sdk-core"),require("jm-ms")),function(){var t=jm.sdk,i=t.storage,n=jm.ms,e="oms";if(!t[e]){t.on("init",function(i){i[e]=i[e]||{},i[e].uri=i[e].uri||i.uri,i[e].timeout=i[e].timeout||i.timeout,t[e].init(i[e])});var o=function(t,i){};t.oms={init:function(o){var u=this;o=o||{};var r=o.uri,a=o.prefix||"/"+e;this.uri=r+a;var m=n();u.client=m,m.use(function(t,n,e){if(t.data||(t.data={}),!t.data.token){var o=i.getItem("token")||null;o&&(t.data.token=o)}e()}),n.client({uri:this.uri,timeout:o.timeout||0},function(i,n){!i&&n&&(m.use({fn:n}),n.on("open",function(){t.emit("open",e)}),n.on("close",function(){t.emit("close",e)}))}),jm.enableEvent(this)},nav:function(t,i){i||(i=o),t||(t={});var n="/nav";this.client.get({uri:n,data:t},i)}}}}();